<!-- editor.html - 視覺編輯器頁面 -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>視覺化編輯器 - EasyYOLO 視覺訓練平台</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/editor.css">
</head>
<body>
  <!-- 側邊欄 -->
  <div class="sidebar">
    <div class="sidebar-header">EasyYOLO 視覺訓練平台</div>
    <ul class="sidebar-menu">
      <li data-view="1120"><span><i class="fas fa-user-friends"></i> 1120</span><span>&gt;</span></li>
      <li data-view="public-projects"><span>公共計畫</span><span>&gt;</span></li>
      <li id="projects-link" class="active" data-view="projects"><span><i class="fas fa-project-diagram"></i> 專案</span></li>
      <li id="workflows-link" data-view="workflows"><span><i class="fas fa-cogs"></i> 工作流</span></li>
      <li data-view="coming-soon"><span><i class="fas fa-chart-line"></i> 監控</span></li>
      <li data-view="coming-soon"><span><i class="fas fa-rocket"></i> 部署</span></li>
      <li data-view="coming-soon"><span><i class="fas fa-compass"></i> 探索</span></li>
      <li id="settings-toggle" data-popup="settings-popup"><span><i class="fas fa-cog"></i> 設定</span><span>&gt;</span></li>
    </ul>

    <div class="sidebar-footer">
      <div class="user-info" data-popup="account-menu">
        <div class="user-avatar" id="user-avatar">測</div>
        <div>
          <div id="user-name"><strong>測試帳戶</strong></div>
          <div id="user-email" style="font-size: 0.85em;">test@demo.com</div>
        </div>
      </div>
      <div id="account-menu">
        <div><strong id="menu-username">測試帳戶</strong></div>
        <div style="font-size: 0.85em; color: gray;" id="menu-email">test@demo.com</div>
        <hr style="margin: 10px 0;">
        <div class="show-coming-soon">⚙ 我的帳戶</div>
        <div class="show-coming-soon">🗂 工作區管理</div>
        <div class="show-coming-soon">💳 訂閱方案</div>
        <div class="show-coming-soon">📊 使用紀錄</div>
        <div onclick="logout()">⇦ 登出</div>
      </div>
    </div>
  </div>

  <div id="settings-popup" class="settings-popup">
    <div class="popup-title">工作區設定</div>
    <div class="show-coming-soon">🧾 訂閱方案與帳單</div>
    <div class="show-coming-soon">💰 點數使用情況</div>
    <div class="show-coming-soon">👥 使用者管理</div>
    <div class="show-coming-soon">🔑 API 金鑰</div>
  </div>

  <!-- 專案側邊欄 -->
  <div class="project-sidebar">
    <div class="project-header">
      <div class="project-icon">
        <img src="../icon/01.png" alt="專案圖示" id="project-icon-img">
      </div>
      <div class="project-title">
        <h3 id="project-name-display">我的第一個專案</h3>
        <p>物件偵測</p>
      </div>
      <div style="cursor: pointer;">
        <i class="fas fa-ellipsis-v"></i>
      </div>
    </div>
    
    <ul class="project-menu">
      <li>
        <a href="dashboard.html">
          <span class="menu-icon"><i class="fas fa-home"></i></span>
          <span>專案概述</span>
        </a>
      </li>
      <li>
        <a href="upload.html">
          <span class="menu-icon"><i class="fas fa-cloud-upload-alt"></i></span>
          <span>上傳檔案</span>
          <span class="menu-badge" id="file-count-badge">10</span>
        </a>
      </li>
      <li class="active">
        <a href="editor.html">
          <span class="menu-icon"><i class="fas fa-tags"></i></span>
          <span>視覺化編輯</span>
        </a>
      </li>
      <li>
        <a href="#" class="show-coming-soon">
          <span class="menu-icon"><i class="fas fa-cube"></i></span>
          <span>訓練模型</span>
        </a>
      </li>
      <li>
        <a href="#" class="show-coming-soon">
          <span class="menu-icon"><i class="fas fa-play-circle"></i></span>
          <span>運行測試</span>
        </a>
      </li>
      <li>
        <a href="visualization.html">
          <span class="menu-icon"><i class="fas fa-brain"></i></span>
          <span>視覺化展示</span>
        </a>
      </li>
      <li>
        <a href="#" class="show-coming-soon">
          <span class="menu-icon"><i class="fas fa-cog"></i></span>
          <span>專案設定</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- 移動設備標題欄 -->
  <div class="mobile-header">
    <button id="toggle-project-sidebar">
      <i class="fas fa-bars"></i>
    </button>
    <div style="font-weight: 500;">視覺化編輯</div>
    <button>
      <i class="fas fa-ellipsis-v"></i>
    </button>
  </div>

  <!-- 主內容 -->
  <main class="main-content">
    <div class="editor-container animated fadeSlideUp">
      <!-- 頁面標題 -->
      <div class="editor-header">
        <h1><i class="fas fa-tags"></i> 視覺化編輯器</h1>
        <div class="editor-actions">
          <button class="btn btn-outline" id="auto-label-btn">
            <i class="fas fa-magic"></i> AI自動標註
          </button>
          <button class="btn btn-primary" id="save-labels-btn">
            <i class="fas fa-save"></i> 儲存標註
          </button>
        </div>
      </div>

      <!-- 編輯器主體 -->
      <div class="editor-main">
        <!-- 圖片列表側邊欄 -->
        <div class="image-list-sidebar">
          <div class="image-list-header">
            <h3>圖片 (10)</h3>
            <div class="image-filter">
              <select id="image-filter-select">
                <option value="all">全部</option>
                <option value="labeled">已標註</option>
                <option value="unlabeled">未標註</option>
              </select>
            </div>
          </div>
          <div class="image-list">
            <div class="image-item active">
              <div class="image-thumbnail">
                <img src="../icon/sample1.jpg" alt="圖片1">
              </div>
              <div class="image-info">
                <div class="image-name">sample1.jpg</div>
                <div class="image-status">
                  <span class="status-badge labeled">已標註 (2)</span>
                </div>
              </div>
            </div>
            <div class="image-item">
              <div class="image-thumbnail">
                <img src="../icon/sample2.jpg" alt="圖片2">
              </div>
              <div class="image-info">
                <div class="image-name">sample2.jpg</div>
                <div class="image-status">
                  <span class="status-badge unlabeled">未標註</span>
                </div>
              </div>
            </div>
            <!-- 更多圖片項目 -->
            <div class="image-item">
              <div class="image-thumbnail">
                <img src="../icon/sample3.jpg" alt="圖片3">
              </div>
              <div class="image-info">
                <div class="image-name">sample3.jpg</div>
                <div class="image-status">
                  <span class="status-badge labeled">已標註 (1)</span>
                </div>
              </div>
            </div>
            <div class="image-item">
              <div class="image-thumbnail">
                <img src="../icon/sample4.jpg" alt="圖片4">
              </div>
              <div class="image-info">
                <div class="image-name">sample4.jpg</div>
                <div class="image-status">
                  <span class="status-badge unlabeled">未標註</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 編輯區域 -->
        <div class="editor-workspace">
          <div class="editor-canvas">
            <div class="canvas-container">
              <img src="../icon/sample1.jpg" alt="編輯圖片" id="editor-image">
              <!-- 標註框將通過JavaScript動態添加 -->
              <div class="annotation-box" style="left: 120px; top: 80px; width: 180px; height: 160px;">
                <div class="annotation-label">人</div>
                <div class="resize-handle top-left"></div>
                <div class="resize-handle top-right"></div>
                <div class="resize-handle bottom-left"></div>
                <div class="resize-handle bottom-right"></div>
              </div>
              <div class="annotation-box" style="left: 320px; top: 150px; width: 100px; height: 120px;">
                <div class="annotation-label">椅子</div>
                <div class="resize-handle top-left"></div>
                <div class="resize-handle top-right"></div>
                <div class="resize-handle bottom-left"></div>
                <div class="resize-handle bottom-right"></div>
              </div>
            </div>
            <div class="canvas-controls">
              <div class="canvas-tools">
                <button class="tool-btn active" title="選擇工具" data-tool="select">
                  <i class="fas fa-mouse-pointer"></i>
                </button>
                <button class="tool-btn" title="矩形工具" data-tool="rectangle">
                  <i class="fas fa-vector-square"></i>
                </button>
                <button class="tool-btn" title="刪除" data-tool="delete">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
              <div class="canvas-zoom">
                <button class="zoom-btn" title="縮小" id="zoom-out-btn">
                  <i class="fas fa-search-minus"></i>
                </button>
                <span class="zoom-level">100%</span>
                <button class="zoom-btn" title="放大" id="zoom-in-btn">
                  <i class="fas fa-search-plus"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 標籤側邊欄 -->
        <div class="labels-sidebar">
          <div class="labels-header">
            <h3>標籤類別</h3>
            <button class="add-label-btn" id="add-label-btn">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <div class="label-list">
            <div class="label-item active">
              <div class="label-color" style="background-color: #3b82f6;"></div>
              <div class="label-name">人</div>
              <div class="label-count">2</div>
            </div>
            <div class="label-item">
              <div class="label-color" style="background-color: #10b981;"></div>
              <div class="label-name">椅子</div>
              <div class="label-count">1</div>
            </div>
            <div class="label-item">
              <div class="label-color" style="background-color: #f59e0b;"></div>
              <div class="label-name">桌子</div>
              <div class="label-count">0</div>
            </div>
          </div>
          <div class="label-form">
            <h3>標籤屬性</h3>
            <div class="form-group">
              <label for="label-name-input">名稱</label>
              <input type="text" id="label-name-input" value="人">
            </div>
            <div class="form-group">
              <label for="label-color-input">顏色</label>
              <input type="color" id="label-color-input" value="#3b82f6">
            </div>
            <div class="coordinates-display">
              <div class="coordinates-group">
                <label>位置:</label>
                <div class="coordinates">
                  <div class="coordinate-item">
                    <span>X</span>
                    <input type="number" id="pos-x-input" value="120">
                  </div>
                  <div class="coordinate-item">
                    <span>Y</span>
                    <input type="number" id="pos-y-input" value="80">
                  </div>
                </div>
              </div>
              <div class="coordinates-group">
                <label>尺寸:</label>
                <div class="coordinates">
                  <div class="coordinate-item">
                    <span>W</span>
                    <input type="number" id="size-w-input" value="180">
                  </div>
                  <div class="coordinate-item">
                    <span>H</span>
                    <input type="number" id="size-h-input" value="160">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 視覺化顯示 -->
      <div class="visualization-section">
        <div class="visualization-header">
          <h2>神經網路視覺化</h2>
          <div class="visualization-controls">
            <button class="btn btn-outline" id="show-visualization-btn">
              <i class="fas fa-eye"></i> 顯示視覺化
            </button>
          </div>
        </div>
        <div class="visualization-content">
          <p class="visualization-info">
            <i class="fas fa-info-circle"></i> 視覺化功能將顯示AI如何"看到"圖像並識別物體，幫助您理解深度學習原理。
          </p>
          <div class="visualization-placeholder">
            <i class="fas fa-network-wired"></i>
            <p>點擊上方按鈕顯示神經網路視覺化</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 新增標籤彈窗 -->
  <div class="modal" id="add-label-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>新增標籤類別</h3>
        <button class="close-modal-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="new-label-name">標籤名稱</label>
          <input type="text" id="new-label-name" placeholder="輸入標籤名稱">
        </div>
        <div class="form-group">
          <label for="new-label-color">標籤顏色</label>
          <input type="color" id="new-label-color" value="#ef4444">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancel-add-label-btn">取消</button>
        <button class="btn btn-primary" id="confirm-add-label-btn">新增</button>
      </div>
    </div>
  </div>

  <!-- AI自動標註彈窗 -->
  <div class="modal" id="ai-label-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>AI自動標註</h3>
        <button class="close-modal-btn">&times;</button>
      </div>
      <div class="modal-body">
        <p>選擇要自動標註的圖片範圍和設定：</p>
        
        <div class="form-group">
          <label>標註範圍</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="label-scope" value="current" checked>
              <span class="radio-custom"></span>
              當前圖片
            </label>
            <label class="radio-label">
              <input type="radio" name="label-scope" value="all">
              <span class="radio-custom"></span>
              所有圖片
            </label>
            <label class="radio-label">
              <input type="radio" name="label-scope" value="unlabeled">
              <span class="radio-custom"></span>
              僅未標註圖片
            </label>
          </div>
        </div>
        
        <div class="form-group">
          <label for="ai-confidence">信心閾值</label>
          <div class="slider-container">
            <input type="range" min="0" max="100" value="70" id="ai-confidence">
            <span id="confidence-value">70%</span>
          </div>
        </div>
        
        <div class="ai-preview">
          <h4>AI預覽標註</h4>
          <div class="ai-preview-image">
            <img src="../icon/sample1.jpg" alt="預覽圖片">
            <div class="preview-box" style="left: 120px; top: 80px; width: 180px; height: 160px;">
              <span>人 (92%)</span>
            </div>
            <div class="preview-box" style="left: 320px; top: 150px; width: 100px; height: 120px;">
              <span>椅子 (85%)</span>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancel-ai-label-btn">取消</button>
        <button class="btn btn-primary" id="confirm-ai-label-btn">自動標註</button>
      </div>
    </div>
  </div>

  <!-- 引入核心腳本 -->
  <script src="../js/core.js"></script>
  <!-- 引入編輯器腳本 -->
  <script src="../js/editor.js"></script>
</body>
</html>