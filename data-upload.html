<!-- data-upload.html - 資料管理頁面 -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>資料管理 - 南臺科技大學AI視覺訓練平台</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="css/data-upload.css">
</head>
<body>
  <!-- 左側導航 -->
  <div class="sidebar" id="main-sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <i class="fas fa-cube"></i>
        <span>AI視覺訓練平台</span>
      </div>
    </div>
    
    <ul class="sidebar-menu">
      <li class="menu-item" onclick="goToMain()">
        <i class="fas fa-home"></i>
        <span>儀表板</span>
      </li>
      <li class="menu-item" onclick="showDeviceConfig()">
        <i class="fas fa-microchip"></i>
        <span>設備</span>
      </li>
      <li class="menu-item active">
        <i class="fas fa-database"></i>
        <span>資料獲取</span>
      </li>
      <li class="menu-item" onclick="showComingSoon()">
        <i class="fas fa-flask"></i>
        <span>實驗</span>
      </li>
      <li class="menu-item" onclick="showComingSoon()">
        <i class="fas fa-adjust"></i>
        <span>EON調節器</span>
      </li>
      <li class="menu-section-header">
        <i class="fas fa-brain"></i>
        <span>脈衝設計</span>
        <i class="fas fa-chevron-down"></i>
      </li>
      <li class="menu-sub-item" onclick="showComingSoon()">
        <i class="fas fa-circle"></i>
        <span>建立脈衝</span>
      </li>
      <li class="menu-sub-item" onclick="showComingSoon()">
        <i class="fas fa-magic"></i>
        <span>重新訓練模型</span>
      </li>
      <li class="menu-sub-item" onclick="showComingSoon()">
        <i class="fas fa-play"></i>
        <span>即時分類</span>
      </li>
      <li class="menu-sub-item" onclick="showComingSoon()">
        <i class="fas fa-vial"></i>
        <span>模型測試</span>
      </li>
      <li class="menu-sub-item" onclick="showComingSoon()">
        <i class="fas fa-rocket"></i>
        <span>部署</span>
      </li>
      <li class="menu-item" onclick="showComingSoon()">
        <i class="fas fa-code-branch"></i>
        <span>版本控制</span>
      </li>
    </ul>

    <div class="sidebar-footer">
      <div class="getting-started">
        <h4>開始使用</h4>
        <div class="menu-item" onclick="showComingSoon()">
          <i class="fas fa-book"></i>
          <span>文件</span>
        </div>
        <div class="menu-item" onclick="showComingSoon()">
          <i class="fas fa-comments"></i>
          <span>論壇</span>
        </div>
        <div class="upgrade-section">
          <div class="upgrade-icon">
            <i class="fas fa-star"></i>
          </div>
          <div class="upgrade-content">
            <h4>升級計劃</h4>
            <p>獲得更高的工作限制和更多協作者</p>
            <button class="upgrade-btn" onclick="showComingSoon()">查看計劃</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 主內容區域 -->
  <main class="main-content">
    <!-- 頂部標籤導航 -->
    <div class="top-tabs">
      <button class="tab-button active" onclick="switchMainTab('dataset')">資料集</button>
      <button class="tab-button" onclick="switchMainTab('explorer')">資料瀏覽器</button>
      <button class="tab-button" onclick="switchMainTab('sources')">資料來源</button>
      <button class="tab-button" onclick="switchMainTab('synthetic')">合成資料</button>
      <div class="tab-divider"></div>
      <button class="tab-button" onclick="switchMainTab('labeling')">
        AI標註
        <span class="new-badge">NEW</span>
      </button>
      <button class="tab-button" onclick="switchMainTab('wizard')">CSV精靈</button>
    </div>

    <!-- 資料集標籤頁 -->
    <div class="tab-content active" id="dataset-tab">
      <div class="content-grid">
        <!-- 左側：資料集面板 -->
        <div class="dataset-panel">
          <div class="panel-header">
            <h3>資料集</h3>
            <div class="panel-actions">
              <button class="icon-btn" onclick="showAddDataModal()" title="添加資料">
                <i class="fas fa-upload"></i>
              </button>
              <button class="icon-btn" onclick="showComingSoon()" title="雲端儲存">
                <i class="fas fa-cloud"></i>
              </button>
            </div>
          </div>
          
          <div class="dataset-content">
            <div class="empty-dataset">
              <div class="empty-icon">
                <i class="fas fa-database"></i>
              </div>
              <div class="add-data-section">
                <h4>添加資料</h4>
                <p>開始建立您的資料集，添加一些資料。</p>
                <button class="add-data-btn" onclick="showAddDataModal()">
                  <i class="fas fa-plus"></i>
                  添加資料
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 右側：收集資料面板 -->
        <div class="collect-panel">
          <div class="panel-header">
            <h3>收集資料</h3>
            <div class="panel-actions">
              <button class="icon-btn" onclick="showComingSoon()" title="設定">
                <i class="fas fa-cog"></i>
              </button>
              <button class="icon-btn" onclick="showComingSoon()" title="分享">
                <i class="fas fa-share-alt"></i>
              </button>
            </div>
          </div>
          
          <div class="collect-content">
            <div class="connect-device">
              <div class="device-icon">
                <i class="fas fa-mobile-alt"></i>
              </div>
              <p><a href="#" onclick="showComingSoon()">連接設備</a>開始建立您的資料集。</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 其他標籤頁內容 -->
    <div class="tab-content" id="explorer-tab">
      <div class="empty-state">
        <i class="fas fa-search"></i>
        <h3>資料瀏覽器</h3>
        <p>功能開發中</p>
      </div>
    </div>

    <div class="tab-content" id="sources-tab">
      <div class="empty-state">
        <i class="fas fa-plug"></i>
        <h3>資料來源</h3>
        <p>功能開發中</p>
      </div>
    </div>

    <div class="tab-content" id="synthetic-tab">
      <div class="empty-state">
        <i class="fas fa-robot"></i>
        <h3>合成資料</h3>
        <p>功能開發中</p>
      </div>
    </div>

    <div class="tab-content" id="labeling-tab">
      <div class="empty-state">
        <i class="fas fa-tags"></i>
        <h3>AI標註</h3>
        <p>功能開發中</p>
      </div>
    </div>

    <div class="tab-content" id="wizard-tab">
      <div class="empty-state">
        <i class="fas fa-magic"></i>
        <h3>CSV精靈</h3>
        <p>功能開發中</p>
      </div>
    </div>
  </main>

  <!-- 設備配置彈窗 -->
  <div class="modal-overlay" id="device-config-modal">
    <div class="modal-container large">
      <div class="modal-header">
        <div class="modal-title">
          <i class="fas fa-microchip"></i>
          <span>配置您的目標設備和應用程式預算</span>
        </div>
        <button class="modal-close" onclick="closeDeviceConfig()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-content">
        <!-- 目標設備區域 -->
        <div class="config-section">
          <div class="section-header">
            <h3>目標設備</h3>
            <p>定義您的目標設備需求以提供模型優化和性能計算。沒有設備嗎？使用預設設定，您可以隨時更改。</p>
          </div>
          
          <div class="config-form">
            <div class="form-group">
              <label for="target-device">目標設備</label>
              <select id="target-device" class="form-select" onchange="updateDeviceSpecs()">
                <option value="cortex-m4f-80">Cortex-M4F 80MHz</option>
                <optgroup label="生產設備">
                  <option value="custom">自訂</option>
                </optgroup>
                <optgroup label="開發板">
                  <option value="alif-he-m55">Alif HE (Cortex-M55 160MHz + U55-128MACC)</option>
                  <option value="alif-hp-m55">Alif HP (Cortex-M55 400MHz + U55-256MACC)</option>
                  <option value="ambiq-apollo4">Ambiq Apollo4 EVB (Cortex-M4F 192MHz)</option>
                  <option value="ambiq-apollo5">Ambiq Apollo5 EVB (Cortex-M55 250MHz)</option>
                  <option value="arduino-nano33-ble">Arduino Nano 33 BLE Sense (Cortex-M4F 64MHz)</option>
                  <option value="arduino-nicla-vision">Arduino Nicla Vision (Cortex-M7 480MHz)</option>
                  <option value="arduino-nicla-voice">Arduino Nicla Voice (Cortex-M4 240MHz)</option>
                  <option value="arduino-portenta-h7">Arduino Portenta H7 (Cortex-M7 480MHz)</option>
                  <option value="brainchip-akd1000">BrainChip AKD1000 or AKD1500</option>
                  <option value="brickml-m33">BrickML (Cortex-M33 192MHz)</option>
                  <option value="cortex-m4f-80" selected>Cortex-M4F 80MHz</option>
                  <option value="cortex-m7-216">Cortex-M7 216MHz</option>
                  <option value="digi-connect-core">Digi ConnectCore 93 (NXP i.MX 93 - Cortex-A55 1.7GHz + Ethos-U65-256)</option>
                  <option value="espressif-esp-eye">Espressif ESP-EYE (ESP32 240MHz)</option>
                  <option value="himax-we1">Himax WE-I (ARC DSP 400MHz)</option>
                  <option value="himax-wiseye2">Himax WiseEye2 (Cortex-M55 400 MHz)</option>
                  <option value="himax-wiseye2-ethos">Himax WiseEye2 (Cortex-M55 400 MHz) + Ethos-U55-64</option>
                  <option value="imdt-v2h-cpu">IMDT V2H (CPU)</option>
                  <option value="imdt-v2h-renesas">IMDT V2H (with Renesas' RZ/V2H)</option>
                  <option value="infineon-psoc6-cy8c6244">Infineon PSoC6 CY8C6244 (Cortex-M4F 150 MHz)</option>
                  <option value="infineon-psoc6-cy8c6347">Infineon PSoC6 CY8C6347 (Cortex-M4F 150 MHz)</option>
                  <option value="macbook-pro-16-2020">MacBook Pro 16" 2020 (Intel Core i9 2.4GHz)</option>
                  <option value="memoryx-mx3">MemoryX MX3</option>
                  <option value="microchip-sama7g54">Microchip SAMA7G54 Evaluation Kit</option>
                  <option value="nordic-nrf52840">Nordic nRF52840 DK (Cortex-M4F 64MHz)</option>
                  <option value="nordic-nrf5340">Nordic nRF5340 DK (Cortex-M33 128MHz)</option>
                  <option value="nordic-nrf9151">Nordic nRF9151 DK (Cortex-M33 64MHz)</option>
                  <option value="nordic-nrf9160">Nordic nRF9160 DK (Cortex-M33 64MHz)</option>
                  <option value="nordic-nrf9161">Nordic nRF9161 DK (Cortex-M33 64MHz)</option>
                  <option value="nvidia-jetson-nano">Nvidia Jetson Nano</option>
                  <option value="nvidia-jetson-orin-nx">Nvidia Jetson Orin NX</option>
                  <option value="nvidia-jetson-orin-nano">Nvidia Jetson Orin Nano</option>
                  <option value="openmv-cam-h7">OpenMV Cam H7 Plus</option>
                  <option value="particle-boron">Particle Boron</option>
                  <option value="particle-photon-2">Particle Photon 2</option>
                  <option value="qualcomm-dragonwing-rb3">Qualcomm Dragonwing RB3 Gen 2 Development Kit</option>
                  <option value="raspberry-pi-4">Raspberry Pi 4</option>
                  <option value="raspberry-pi-5">Raspberry Pi 5</option>
                  <option value="raspberry-pi-rp2040">Raspberry Pi RP2040 (Cortex-M0+ 133MHz)</option>
                  <option value="renesas-ra6m5">Renesas RA6M5 (Cortex-M33 200MHz)</option>
                  <option value="renesas-ra8d1">Renesas RA8D1 (Cortex-M85 480MHz)</option>
                  <option value="renesas-rz-g2l">Renesas RZ/G2L</option>
                  <option value="renesas-rz-v2h-cpu">Renesas RZ/V2H (CPU)</option>
                  <option value="renesas-rz-v2h-drp">Renesas RZ/V2H (with DRP-AI3 accelerator)</option>
                  <option value="renesas-rz-v2l-cpu">Renesas RZ/V2L (CPU)</option>
                  <option value="renesas-rz-v2l-drp">Renesas RZ/V2L (with DRP-AI accelerator)</option>
                  <option value="st-discovery-kit">ST IoT Discovery Kit (Cortex-M4F 80MHz)</option>
                  <option value="st-stm32n6">ST STM32N6 (Cortex-M55 600MHz + ST Neural-ART accelerator)</option>
                  <option value="seeed-sensecap-a1101">Seeed SenseCap A1101 (HX6537-A ARC DSP 400MHz)</option>
                  <option value="seeed-studio-wio-terminal">Seeed Studio Wio Terminal (Cortex-M4F 120MHz)</option>
                  <option value="seeed-vision-ai-module">Seeed Vision AI Module (HX6537-A ARC DSP 400MHz)</option>
                  <option value="silabs-efr32mg24">SiLabs EFR32MG24 (Cortex-M33 78MHz)</option>
                  <option value="silabs-thunderboard-sense2">SiLabs Thunderboard Sense 2 (Cortex-M4F 40MHz)</option>
                  <option value="sony-spresense">Sony Spresense (Cortex-M4F 156MHz)</option>
                  <option value="synaptics-ka10000">Synaptics KA10000</option>
                  <option value="ti-am62a-deep-learning">TI AM62A (with Deep Learning Accelerator)</option>
                  <option value="ti-am68a-deep-learning">TI AM68A (with Deep Learning Accelerator)</option>
                  <option value="ti-launchxl-cc1352p">TI LAUNCHXL-CC1352P (Cortex-M4F 48MHz)</option>
                  <option value="ti-tda4vm-mma">TI TDA4VM (with matrix multiply accelerator (MMA))</option>
                  <option value="think-silicon-neox-ga100">Think Silicon Neox GA100 (200 MHz) [BETA]</option>
                </optgroup>
              </select>
            </div>
            
            <div class="form-group">
              <label for="processor-family">處理器系列</label>
              <select id="processor-family" class="form-select">
                <option value="cortex-m">Cortex-M</option>
                <option value="cortex-a">Cortex-A</option>
                <option value="x86">x86</option>
                <option value="xtensa">Xtensa</option>
                <option value="arc">ARC</option>
                <option value="other">其他</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="clock-rate">時鐘頻率 <i class="fas fa-question-circle" title="處理器時鐘頻率"></i></label>
              <div class="input-group">
                <input type="number" id="clock-rate" class="form-input" value="80" min="1" max="3000">
                <span class="input-suffix">MHz</span>
              </div>
              <small class="form-help">最大</small>
            </div>
            
            <div class="form-group">
              <label for="custom-name">自訂設備名稱 <span class="optional">(可選)</span> <i class="fas fa-question-circle" title="為您的設備指定一個自訂名稱"></i></label>
              <input type="text" id="custom-name" class="form-input" placeholder="輸入自訂名稱">
            </div>
          </div>
        </div>
        
        <!-- 應用程式預算區域 -->
        <div class="config-section">
          <div class="section-header">
            <h3>應用程式預算</h3>
            <p>指定模型運行可用的 RAM 和 ROM，以及您特定應用程式允許的最大延遲。不確定？從預設值開始，稍後再修改。</p>
          </div>
          
          <div class="config-form">
            <div class="form-group">
              <label for="ram-budget">RAM</label>
              <div class="input-group">
                <input type="number" id="ram-budget" class="form-input" value="128" min="1" max="8192">
                <span class="input-suffix">KB</span>
              </div>
              <small class="form-help">最大</small>
            </div>
            
            <div class="form-group">
              <label for="rom-budget">ROM</label>
              <div class="input-group">
                <input type="number" id="rom-budget" class="form-input" value="1" min="1" max="1024">
                <span class="input-suffix">MB</span>
              </div>
              <small class="form-help">最大</small>
            </div>
            
            <div class="form-group">
              <label for="latency-budget">延遲 <i class="fas fa-question-circle" title="最大允許的推理延遲"></i></label>
              <div class="input-group">
                <input type="number" id="latency-budget" class="form-input" value="100" min="1" max="10000">
                <span class="input-suffix">ms</span>
              </div>
              <small class="form-help">最大</small>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="resetToDefaults()">
          重設為預設設定
        </button>
        <div class="footer-actions">
          <button class="btn btn-secondary" onclick="closeDeviceConfig()">取消</button>
          <button class="btn btn-primary" onclick="saveDeviceConfig()">
            儲存
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 添加現有資料選擇彈窗 -->
  <div class="modal-overlay" id="add-data-modal">
    <div class="modal-container">
      <div class="modal-header">
        <h3>添加現有資料</h3>
        <button class="modal-close" onclick="closeAddDataModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-content">
        <div class="upload-options">
          <div class="upload-option" onclick="selectUploadType('local')">
            <div class="option-icon">
              <i class="fas fa-upload"></i>
            </div>
            <div class="option-content">
              <h4>上傳資料</h4>
              <p>從本地電腦上傳檔案</p>
            </div>
          </div>
          
          <div class="upload-option" onclick="selectUploadType('cloud')">
            <div class="option-icon">
              <i class="fas fa-cloud"></i>
            </div>
            <div class="option-content">
              <h4>新增儲存桶</h4>
              <p>從雲端儲存匯入資料</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeAddDataModal()">取消</button>
        <button class="btn btn-primary" onclick="showComingSoon()" disabled>
          <i class="fas fa-check"></i>
          確認
        </button>
      </div>
    </div>
  </div>

  <!-- 上傳資料詳細表單彈窗 -->
  <div class="modal-overlay" id="upload-data-modal">
    <div class="modal-container large">
      <div class="modal-header">
        <div class="modal-title">
          <h3>上傳資料</h3>
        </div>
        <button class="modal-close" onclick="closeUploadDataModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-content">
        <!-- 說明文字 -->
        <div class="upload-description">
          <p>您可以上傳 CBOR、JSON、CSV、Parquet、WAV、JPG、PNG、AVI 或 MP4 檔案。您也可以上傳名為 "info.labels" 的標註檔案，用於指定邊界框、標籤和/或元資料。查看 <a href="#" onclick="showComingSoon()">上傳器文件</a> 了解更多。或者，您可以使用我們的 <a href="#" onclick="showComingSoon()">Python SDK</a> 以程式方式匯入各種格式的資料，例如 pandas 或 numpy；或 <a href="#" onclick="showComingSoon()">直接從另一個專案匯入資料</a>。</p>
          
          <p>對於 CSV 和 Parquet 檔案，<a href="#" onclick="showComingSoon()">配置 CSV 精靈</a> 以定義在上傳檔案之前應如何處理您的檔案。</p>
        </div>

        <!-- 上傳模式 -->
        <div class="form-section">
          <h4>上傳模式</h4>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="upload-mode" value="individual" checked onchange="handleUploadModeChange('individual')">
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>選擇個別檔案</strong>
                <i class="fas fa-question-circle" title="選擇要上傳的個別檔案"></i>
              </div>
            </label>
            
            <label class="radio-option">
              <input type="radio" name="upload-mode" value="folder" onchange="handleUploadModeChange('folder')">
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>選擇資料夾</strong>
                <i class="fas fa-question-circle" title="選擇包含檔案的資料夾"></i>
              </div>
            </label>
          </div>
        </div>

        <!-- 選擇檔案 -->
        <div class="form-section">
          <h4>選擇檔案</h4>
          <div class="file-upload-area">
            <input type="file" id="file-input" multiple accept=".jpg,.jpeg,.png,.csv,.json,.cbor,.parquet,.wav,.avi,.mp4" style="display: none;" onchange="handleFileSelect(event)">
            <button class="upload-trigger-btn" onclick="document.getElementById('file-input').click()">
              選擇檔案
            </button>
            <span class="upload-status" id="upload-status">沒有選擇檔案</span>
          </div>
        </div>

        <!-- 上傳到類別 -->
        <div class="form-section">
          <h4>上傳到類別</h4>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="upload-category" value="auto-split" checked>
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>自動在訓練和測試之間分割</strong>
                <i class="fas fa-question-circle" title="系統會自動將資料分為訓練集和測試集"></i>
              </div>
            </label>
            
            <label class="radio-option">
              <input type="radio" name="upload-category" value="training">
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>訓練</strong>
              </div>
            </label>
            
            <label class="radio-option">
              <input type="radio" name="upload-category" value="testing">
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>測試</strong>
              </div>
            </label>
          </div>
        </div>

        <!-- 標籤 -->
        <div class="form-section">
          <h4>標籤</h4>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="label-mode" value="from-filename" checked>
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>從檔案名稱推斷</strong>
                <i class="fas fa-question-circle" title="從檔案名稱自動推斷標籤"></i>
              </div>
            </label>
            
            <label class="radio-option">
              <input type="radio" name="label-mode" value="unlabeled" onchange="handleLabelModeChange('unlabeled')">
              <span class="radio-custom"></span>
              <div class="radio-content">
                <strong>保留資料未標註</strong>
                <i class="fas fa-question-circle" title="上傳的資料將保持未標註狀態"></i>